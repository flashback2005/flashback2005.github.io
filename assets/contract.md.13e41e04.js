import{_ as s,c as n,o as a,a as l}from"./app.c736b48a.js";const i=JSON.parse('{"title":"@/contractsApi/useXXX.ts","description":"","frontmatter":{},"headers":[{"level":3,"title":"\u4E3B\u8981\u4F5C\u7528: \u7EC4\u88C5\u5408\u7EA6\u8FD4\u56DE\u7684\u6570\u636E","slug":"\u4E3B\u8981\u4F5C\u7528-\u7EC4\u88C5\u5408\u7EA6\u8FD4\u56DE\u7684\u6570\u636E","link":"#\u4E3B\u8981\u4F5C\u7528-\u7EC4\u88C5\u5408\u7EA6\u8FD4\u56DE\u7684\u6570\u636E","children":[]},{"level":2,"title":"createContract","slug":"createcontract","link":"#createcontract","children":[]},{"level":2,"title":"watchAccount","slug":"watchaccount","link":"#watchaccount","children":[]},{"level":2,"title":"useDefaultRpc","slug":"usedefaultrpc","link":"#usedefaultrpc","children":[]},{"level":2,"title":"\u6709\u51E0\u4E2Ahook\u662F\u6BD4\u8F83\u901A\u7528\u7684\u6A21\u578B\uFF1A","slug":"\u6709\u51E0\u4E2Ahook\u662F\u6BD4\u8F83\u901A\u7528\u7684\u6A21\u578B","link":"#\u6709\u51E0\u4E2Ahook\u662F\u6BD4\u8F83\u901A\u7528\u7684\u6A21\u578B","children":[]},{"level":2,"title":"\u9664\u4E86\u4E0A\u8FF03\u4E2A\u5408\u7EA6\u4E4B\u5916\uFF0C\u5176\u4ED6\u5408\u7EA6\u9700\u8981\u6700\u597D\u81EA\u884C\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6\uFF0C\u53BB\u6784\u5EFA\u81EA\u5DF1\u7684\u5408\u7EA6\u5BF9\u8C61","slug":"\u9664\u4E86\u4E0A\u8FF03\u4E2A\u5408\u7EA6\u4E4B\u5916-\u5176\u4ED6\u5408\u7EA6\u9700\u8981\u6700\u597D\u81EA\u884C\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6-\u53BB\u6784\u5EFA\u81EA\u5DF1\u7684\u5408\u7EA6\u5BF9\u8C61","link":"#\u9664\u4E86\u4E0A\u8FF03\u4E2A\u5408\u7EA6\u4E4B\u5916-\u5176\u4ED6\u5408\u7EA6\u9700\u8981\u6700\u597D\u81EA\u884C\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6-\u53BB\u6784\u5EFA\u81EA\u5DF1\u7684\u5408\u7EA6\u5BF9\u8C61","children":[]},{"level":2,"title":"\u6817\u5B50\uFF1A","slug":"\u6817\u5B50","link":"#\u6817\u5B50","children":[]}],"relativePath":"contract.md"}'),p={name:"contract.md"},o=l(`<h1 id="contractsapi-usexxx-ts" tabindex="-1">@/contractsApi/useXXX.ts <a class="header-anchor" href="#contractsapi-usexxx-ts" aria-hidden="true">#</a></h1><blockquote><p>\u5408\u7EA6\u4EA4\u4E92\u7684 hook</p></blockquote><h3 id="\u4E3B\u8981\u4F5C\u7528-\u7EC4\u88C5\u5408\u7EA6\u8FD4\u56DE\u7684\u6570\u636E" tabindex="-1">\u4E3B\u8981\u4F5C\u7528: \u7EC4\u88C5\u5408\u7EA6\u8FD4\u56DE\u7684\u6570\u636E <a class="header-anchor" href="#\u4E3B\u8981\u4F5C\u7528-\u7EC4\u88C5\u5408\u7EA6\u8FD4\u56DE\u7684\u6570\u636E" aria-hidden="true">#</a></h3><h2 id="createcontract" tabindex="-1">createContract <a class="header-anchor" href="#createcontract" aria-hidden="true">#</a></h2><p>\u5229\u7528 ethers \u6784\u5EFA\u5408\u7EA6\u5BF9\u8C61</p><h2 id="watchaccount" tabindex="-1">watchAccount <a class="header-anchor" href="#watchaccount" aria-hidden="true">#</a></h2><p>\u7531\u4E8E\u5C0F\u72D0\u72F8\u63D2\u4EF6\u5F02\u6B65\u7684\u5173\u7CFB\uFF0C\u9700\u8981\u76D1\u542C\u4E0E\u91CD\u6784\u5408\u7EA6\u5BF9\u8C61</p><h2 id="usedefaultrpc" tabindex="-1">useDefaultRpc <a class="header-anchor" href="#usedefaultrpc" aria-hidden="true">#</a></h2><p>\u5728\u6BCF\u4E2A\u5408\u7EA6\u5BF9\u8C61\u6784\u5EFA<code>createContract</code>\u7684\u65F6\u5019\uFF0C\u9700\u8981\u624B\u52A8\u5F15\u5165 <code>useDefaultRpc</code>\uFF0C\u76EE\u7684\u662F\u5982\u679C\u6CA1\u6709\u5C0F\u72D0\u72F8\uFF0C\u5219\u4F7F\u7528\u9884\u8BBE\u597D\u7684 rpc \u6784\u5EFA\u5408\u7EA6\u5BF9\u8C61\u3002</p><h2 id="\u6709\u51E0\u4E2Ahook\u662F\u6BD4\u8F83\u901A\u7528\u7684\u6A21\u578B" tabindex="-1">\u6709\u51E0\u4E2Ahook\u662F\u6BD4\u8F83\u901A\u7528\u7684\u6A21\u578B\uFF1A <a class="header-anchor" href="#\u6709\u51E0\u4E2Ahook\u662F\u6BD4\u8F83\u901A\u7528\u7684\u6A21\u578B" aria-hidden="true">#</a></h2><ul><li><strong>useCoinToken\uFF1A\u7528\u4F5C\u6784\u5EFAERC20\u4EE3\u5E01\u5408\u7EA6\u5BF9\u8C61</strong></li><li><strong>useLpToken: \u7528\u4F5C\u6784\u5EFAlp\u5408\u7EA6\u5BF9\u8C61</strong></li><li><strong>useNftToken: \u7528\u4F5C\u6784\u5EFAnft\u5408\u7EA6\u5BF9\u8C61</strong></li></ul><p>\u4EE5\u4E0A hook \u9700\u8981\u4F20\u5165 \u5408\u7EA6\u5730\u5740 \u548C abi\uFF0C\u52A8\u6001\u751F\u6210\u5408\u7EA6\u5BF9\u8C61</p><p>\u4EE5\u4E0A hook \u5DF2\u7ECF\u5199\u597D\u4E00\u4E9B\u6BD4\u8F83\u5E38\u7528\u7684\u65B9\u6CD5\uFF0C\u5982\u679C\u4F60\u4F7F\u7528\u7684\u65B9\u6CD5\u4E0D\u5728\u8FD9\u91CC\u9762\uFF0C\u53EF\u4EE5\u81EA\u884C\u6DFB\u52A0\u4E0A\u53BB\u3002</p><h2 id="\u9664\u4E86\u4E0A\u8FF03\u4E2A\u5408\u7EA6\u4E4B\u5916-\u5176\u4ED6\u5408\u7EA6\u9700\u8981\u6700\u597D\u81EA\u884C\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6-\u53BB\u6784\u5EFA\u81EA\u5DF1\u7684\u5408\u7EA6\u5BF9\u8C61" tabindex="-1">\u9664\u4E86\u4E0A\u8FF03\u4E2A\u5408\u7EA6\u4E4B\u5916\uFF0C\u5176\u4ED6\u5408\u7EA6\u9700\u8981\u6700\u597D\u81EA\u884C\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6\uFF0C\u53BB\u6784\u5EFA\u81EA\u5DF1\u7684\u5408\u7EA6\u5BF9\u8C61 <a class="header-anchor" href="#\u9664\u4E86\u4E0A\u8FF03\u4E2A\u5408\u7EA6\u4E4B\u5916-\u5176\u4ED6\u5408\u7EA6\u9700\u8981\u6700\u597D\u81EA\u884C\u65B0\u5EFA\u4E00\u4E2A\u6587\u4EF6-\u53BB\u6784\u5EFA\u81EA\u5DF1\u7684\u5408\u7EA6\u5BF9\u8C61" aria-hidden="true">#</a></h2><p>\u6BD4\u5982<code>@/contractsApi/useStakeContractApi.ts</code>\u8FD9\u4E2A\u6587\u4EF6\u3002</p><h2 id="\u6817\u5B50" tabindex="-1">\u6817\u5B50\uFF1A <a class="header-anchor" href="#\u6817\u5B50" aria-hidden="true">#</a></h2><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">STAKE_CONT</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/contracts/address</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useAppStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@store/appStore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> i18n </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/locales/i18n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> useDefaultRpc </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./useDefaultRpc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bpFormat</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bpMul</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/utils/bpMath</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bpRead</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bpWrite</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/service/bpAction</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">watchAccount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@/hooks/useAction</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reactive</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Ref</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> $t </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> i18n</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">global</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">t</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">appStore</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useAppStore</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">created</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u5408\u7EA6\u5BF9\u8C61\u662F\u5426\u6784\u5EFA\u5B8C</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">stakeObj</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u4EE3\u5E01\u5408\u7EA6\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">decimals</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">18</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u4EE3\u5E01\u7CBE\u5EA6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">   * \u6784\u5EFA\u8D28\u62BC\u5408\u7EA6\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#676E95;">   */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createContract</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">signer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">useDefaultRpc</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u4F7F\u7528rpc\u8282\u70B9</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">stakeObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">appStore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ethersObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ethers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Contract</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">STAKE_CONT</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">address</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">STAKE_CONT</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">abi</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">signer</span></span>
<span class="line"><span style="color:#F07178;">      )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6784\u5EFA\u8D28\u62BC\u5408\u7EA6\u5BF9\u8C61\u5931\u8D25</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">created</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">stakeObj</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">createContract</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// \u6DFB\u52A0\u94B1\u5305\u76D1\u542C</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">watchAccount</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">createContract</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useInfo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">bpRead</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">stakeObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">userInfo</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">appStore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">defaultAccount</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">userInfo</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">bpRead</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">stakeObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">userInfo</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">appStore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">defaultAccount</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">resp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">resp</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">   * \u8D28\u62BC\u6316\u77FF</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">amount</span><span style="color:#676E95;"> \u8D28\u62BC\u6570\u91CF</span></span>
<span class="line"><span style="color:#676E95;">   * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">inv</span><span style="color:#676E95;"> \u9080\u8BF7\u4EBA</span></span>
<span class="line"><span style="color:#676E95;">   */</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">stake</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">amount</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">BigNumStr</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">inv</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cloneAmount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">bpMul</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">amount</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">**</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">18</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">status</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">bpWrite</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> success</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">$t</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">msg.12</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">stakeObj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stake</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cloneAmount</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">status</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">created</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">userInfo</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">createContract</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">stake</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><h4 id="\u5982\u679C\u4F60\u4F7F\u7528vscode-\u53EF\u4EE5\u6DFB\u52A0\u4E0B\u9762\u81EA\u5B9A\u4E49\u4EE3\u7801\u7247\u6BB5" tabindex="-1">\u5982\u679C\u4F60\u4F7F\u7528vsCode\uFF0C\u53EF\u4EE5\u6DFB\u52A0\u4E0B\u9762\u81EA\u5B9A\u4E49\u4EE3\u7801\u7247\u6BB5\uFF1A <a class="header-anchor" href="#\u5982\u679C\u4F60\u4F7F\u7528vscode-\u53EF\u4EE5\u6DFB\u52A0\u4E0B\u9762\u81EA\u5B9A\u4E49\u4EE3\u7801\u7247\u6BB5" aria-hidden="true">#</a></h4><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">		&quot;useApi&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">			&quot;prefix&quot;: &quot;useapi&quot;, // \u89E6\u53D1\u7684\u5173\u952E\u5B57</span></span>
<span class="line"><span style="color:#A6ACCD;">			&quot;body&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import { \${1} } from &#39;@/contracts/address&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import { useAppStore } from &#39;@store/appStore&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import i18n from &#39;@/locales/i18n&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import useDefaultRpc from &#39;./useDefaultRpc&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import { bpFormat, bpMul } from &#39;@/utils/bpMath&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import { bpRead, bpWrite } from &#39;@/service/bpAction&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import { watchAccount } from &#39;@/hooks/useAction&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;import { ref } from &#39;vue&#39;;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;const $t = i18n.global.t;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;export default () =&gt; {&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;const appStore = useAppStore();&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;const created = ref&lt;boolean&gt;(false); // \u5408\u7EA6\u5BF9\u8C61\u662F\u5426\u6784\u5EFA\u5B8C&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;const \${2} = ref&lt;any&gt;({}); // \u4EE3\u5E01\u5408\u7EA6\u5BF9\u8C61&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;const decimals = ref&lt;number&gt;(18); // \u4EE3\u5E01\u7CBE\u5EA6&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;/**&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot; * \u6784\u5EFA\u8D28\u62BC\u5408\u7EA6\u5BF9\u8C61&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot; */&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;async function createContract() {&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  const signer = useDefaultRpc();&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  try {&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;     \${2}.value = new appStore.ethersObj.ethers.Contract(&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;     \${1}.address,&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;     \${1}.abi,&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;     signer&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;   );&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  } catch (error) {&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;   console.log(&#39;\u6784\u5EFA\${2}\u5408\u7EA6\u5BF9\u8C61\u5931\u8D25&#39;, error);&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  }&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;    created.value = true;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;    return \${2};&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  }&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  createContract();&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  // \u6DFB\u52A0\u94B1\u5305\u76D1\u542C&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  watchAccount(() =&gt; {&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;    createContract();&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  });&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;\${3}&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  const userInfo = async () =&gt; {&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  const resp = await bpRead(\${2}.value.userInfo, appStore.defaultAccount);&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  if (!resp.status) return;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;    return resp;&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  }&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  return {&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;    created,&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;    userInfo,&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;    createContract,&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot;  }&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">				&quot; }&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">			],</span></span>
<span class="line"><span style="color:#A6ACCD;">			&quot;description&quot;: &quot;contractsApi&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">		},</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,19),t=[o];function e(c,r,y,F,D,A){return a(),n("div",null,t)}const u=s(p,[["render",e]]);export{i as __pageData,u as default};
